ğŸ·: #JavaScript  #æ·±æ‹·è´  #æµ…æ‹·è´ 

## ä¸€ã€æ•°æ®ç±»å‹å­˜å‚¨
å‰é¢æ–‡ç« æˆ‘ä»¬è®²åˆ°ï¼Œ`JavaScript`ä¸­å­˜åœ¨ä¸¤å¤§æ•°æ®ç±»å‹ï¼š
- åŸºæœ¬ç±»å‹
- å¼•ç”¨ç±»å‹ 
åŸºæœ¬ç±»å‹æ•°æ®ä¿å­˜åœ¨åœ¨æ ˆå†…å­˜ä¸­
å¼•ç”¨ç±»å‹æ•°æ®ä¿å­˜åœ¨å †å†…å­˜ä¸­ï¼Œå¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡æ˜¯ä¸€ä¸ªæŒ‡å‘å †å†…å­˜ä¸­å®é™…å¯¹è±¡çš„å¼•ç”¨ï¼Œå­˜åœ¨æ ˆä¸­
## äºŒã€æµ…æ‹·è´
æµ…æ‹·è´ï¼ŒæŒ‡çš„æ˜¯åˆ›å»ºæ–°çš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æœ‰ç€åŸå§‹æ•°æ®å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´

å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ã€‚å¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€

å³æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œæ·±å±‚æ¬¡çš„å¼•ç”¨ç±»å‹åˆ™å…±äº«å†…å­˜åœ°å€

ä¸‹é¢ç®€å•å®ç°ä¸€ä¸ªæµ…æ‹·è´

```javascript
function shallowClone(obj) {
    const newObj = {};
    for(let prop in obj) {
        if(obj.hasOwnProperty(prop)){
            newObj[prop] = obj[prop];
        }
    }
    return newObj;
}
```

åœ¨`JavaScript`ä¸­ï¼Œå­˜åœ¨æµ…æ‹·è´çš„ç°è±¡æœ‰ï¼š

- `Object.assign`
- `Array.prototype.slice()`, `Array.prototype.concat()`
- ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦å®ç°çš„å¤åˆ¶
### Object.assign

```javascript
var obj = {
    age: 18,
    nature: ['smart', 'good'],
    names: {
        name1: 'fx',
        name2: 'xka'
    },
    love: function () {
        console.log('fx is a great girl')
    }
}
var newObj = Object.assign({}, fxObj);
```



### slice()

```javascript
const fxArr = ["One", "Two", "Three"]
const fxArrs = fxArr.slice(0)
fxArrs[1] = "love";
console.log(fxArr) // ["One", "Two", "Three"]
console.log(fxArrs) // ["One", "love", "Three"]
```



### concat()

```javascript
const fxArr = ["One", "Two", "Three"]
const fxArrs = fxArr.concat()
fxArrs[1] = "love";
console.log(fxArr) // ["One", "Two", "Three"]
console.log(fxArrs) // ["One", "love", "Three"]
```







### æ‹“å±•è¿ç®—ç¬¦

```javascript
const fxArr = ["One", "Two", "Three"]
const fxArrs = [...fxArr]
fxArrs[1] = "love";
console.log(fxArr) // ["One", "Two", "Three"]
console.log(fxArrs) // ["One", "love", "Three"]
```





## ä¸‰ã€æ·±æ‹·è´

æ·±æ‹·è´å¼€è¾Ÿä¸€ä¸ªæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡å±å®Œæˆç›¸åŒï¼Œä½†æ˜¯å¯¹åº”ä¸¤ä¸ªä¸åŒçš„åœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§

å¸¸è§çš„æ·±æ‹·è´æ–¹å¼æœ‰ï¼š

- _.cloneDeep()

- jQuery.extend()
- JSON.stringify()
- æ‰‹å†™å¾ªç¯é€’å½’



### _.cloneDeep()

```javascript
const _ = require('lodash');
const obj1 = {
    a: 1,
    b: { f: { g: 1 } },
    c: [1, 2, 3]
};
const obj2 = _.cloneDeep(obj1);
console.log(obj1.b.f === obj2.b.f);// false
```



### jQuery.extend()

```javascript
const $ = require('jquery');
const obj1 = {
    a: 1,
    b: { f: { g: 1 } },
    c: [1, 2, 3]
};
const obj2 = $.extend(true, {}, obj1);
console.log(obj1.b.f === obj2.b.f); // false
```





### JSON.stringify()

```javascript
const obj2=JSON.parse(JSON.stringify(obj1));
```

ä½†æ˜¯è¿™ç§æ–¹å¼å­˜åœ¨å¼Šç«¯ï¼Œä¼šå¿½ç•¥`undefined`ã€`symbol`å’Œ`å‡½æ•°`

```javascript
const obj = {
    name: 'A',
    name1: undefined,
    name3: function() {},
    name4:  Symbol('A')
}
const obj2 = JSON.parse(JSON.stringify(obj));
console.log(obj2); // {name: "A"}
```



### å¾ªç¯é€’å½’

```javascript
function deepClone(obj, hash = new WeakMap()) {
  if (obj === null) return obj; // å¦‚æœæ˜¯nullæˆ–è€…undefinedæˆ‘å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ
  if (obj instanceof Date) return new Date(obj);
  if (obj instanceof RegExp) return new RegExp(obj);
  // å¯èƒ½æ˜¯å¯¹è±¡æˆ–è€…æ™®é€šçš„å€¼  å¦‚æœæ˜¯å‡½æ•°çš„è¯æ˜¯ä¸éœ€è¦æ·±æ‹·è´
  if (typeof obj !== "object") return obj;
  // æ˜¯å¯¹è±¡çš„è¯å°±è¦è¿›è¡Œæ·±æ‹·è´
  if (hash.get(obj)) return hash.get(obj);
  let cloneObj = new obj.constructor();
  // æ‰¾åˆ°çš„æ˜¯æ‰€å±ç±»åŸå‹ä¸Šçš„constructor,è€ŒåŸå‹ä¸Šçš„ constructoræŒ‡å‘çš„æ˜¯å½“å‰ç±»æœ¬èº«
  hash.set(obj, cloneObj);
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      // å®ç°ä¸€ä¸ªé€’å½’æ‹·è´
      cloneObj[key] = deepClone(obj[key], hash);
    }
  }
  return cloneObj;
}
```







## å››ã€åŒºåˆ«

ä¸‹é¢é¦–å…ˆå€ŸåŠ©ä¸¤å¼ å›¾ï¼Œå¯ä»¥æ›´åŠ æ¸…æ™°çœ‹åˆ°æµ…æ‹·è´ä¸æ·±æ‹·è´çš„åŒºåˆ«

 ![](https://static.vue-js.com/d9862c00-69b8-11eb-ab90-d9ae814b240d.png)

ä»ä¸Šå›¾å‘ç°ï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´éƒ½åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä½†åœ¨å¤åˆ¶å¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œè¡Œä¸ºå°±ä¸ä¸€æ ·

æµ…æ‹·è´åªå¤åˆ¶å±æ€§æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜ï¼Œä¿®æ”¹å¯¹è±¡å±æ€§ä¼šå½±å“åŸå¯¹è±¡

```javascript
// æµ…æ‹·è´
const obj1 = {
    name : 'init',
    arr : [1,[2,3],4],
};
const obj3=shallowClone(obj1) // ä¸€ä¸ªæµ…æ‹·è´æ–¹æ³•
obj3.name = "update";
obj3.arr[1] = [5,6,7] ; // æ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜

console.log('obj1',obj1) // obj1 { name: 'init',  arr: [ 1, [ 5, 6, 7 ], 4 ] }
console.log('obj3',obj3) // obj3 { name: 'update', arr: [ 1, [ 5, 6, 7 ], 4 ] }
```

ä½†æ·±æ‹·è´ä¼šå¦å¤–åˆ›é€ ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜ï¼Œä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šæ”¹åˆ°åŸå¯¹è±¡

```javascript
// æ·±æ‹·è´
const obj1 = {
    name : 'init',
    arr : [1,[2,3],4],
};
const obj4=deepClone(obj1) // ä¸€ä¸ªæ·±æ‹·è´æ–¹æ³•
obj4.name = "update";
obj4.arr[1] = [5,6,7] ; // æ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜

console.log('obj1',obj1) // obj1 { name: 'init', arr: [ 1, [ 2, 3 ], 4 ] }
console.log('obj4',obj4) // obj4 { name: 'update', arr: [ 1, [ 5, 6, 7 ], 4 ] }
```



### å°ç»“

å‰æä¸ºæ‹·è´ç±»å‹ä¸ºå¼•ç”¨ç±»å‹çš„æƒ…å†µä¸‹ï¼š

- æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæµ…æ‹·è´æ˜¯å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªåœ°å€

- æ·±æ‹·è´æ˜¯é€’å½’æ‹·è´æ·±å±‚æ¬¡ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæ·±æ‹·è´æ˜¯æ–°å¼€æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ä¸åŒçš„åœ°å€
