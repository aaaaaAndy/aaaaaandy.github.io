ğŸ·: #typeof #instanceof #constructor #toString
***

## ä¸€ã€`typeof` åŸºæœ¬åˆ¤æ–­

```javascript
typeof a;					// undefined
typeof (a = 1);			  // number
typeof (a = '1');			// string
typeof (a = true);		   // boolean
typeof (a = Symbol());       // symbol
typeof (a = function() {});  // function
typeof (a = null);		   // object
typeof (a = [1, 2]);	     // object
typeof (a = { });			// object
```

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¯¹`null`ç±»å‹çš„åˆ¤æ–­ä¸­è¿”å›äº†`object`ï¼Œè¿™æ˜¯å› ä¸º`typeof`åªå¤„ç†è¿”å›äº†å¤„äºåŸå‹é“¾æœ€é¡¶ç«¯çš„`object`ç±»å‹ï¼Œå®ƒçš„è¿”å›æ²¡æœ‰é”™ï¼Œä½†ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚

`typeof`åŸºæœ¬èƒ½åˆ¤æ–­å¤§éƒ¨åˆ†æ•°æ®ç±»å‹ï¼Œä½†æ˜¯æœ‰ä¸¤ç‚¹ç‰¹æ®Šï¼š

- å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œé™¤`null`å¤–ï¼Œå‡å¯ä»¥è¿”å›æ­£ç¡®ç»“æœï¼›
- å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œé™¤`function`å¤–ï¼Œä¸€å¾‹è¿”å›`object`ç±»å‹ã€‚

## äºŒã€`instanceof` åŸå‹æ£€æŸ¥

`instanceof` æ˜¯ç”¨æ¥åˆ¤æ–­ A æ˜¯å¦ä¸º B çš„å®ä¾‹ï¼Œè¡¨è¾¾å¼ä¸ºï¼š`A instanceof B`ï¼Œå¦‚æœ A æ˜¯ B çš„å®ä¾‹ï¼Œåˆ™è¿”å› true,å¦åˆ™è¿”å› falseã€‚ åœ¨è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š **`instanceof` æ£€æµ‹çš„æ˜¯åŸå‹**ã€‚

**instanceof åªèƒ½ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å±äºå®ä¾‹å…³ç³»ï¼Œ è€Œä¸èƒ½åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡å®ä¾‹å…·ä½“å±äºå“ªç§ç±»å‹ã€‚**

éœ€è¦æ³¨æ„çš„æ˜¯`instanceof`å·¦ä¾§åªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚`1 instanceof Number`ä¼šè¿”å›`false`ã€‚å› ä¸º`1`æ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ã€‚

`instanceof`æ“ä½œç¬¦çš„é—®é¢˜åœ¨äºå®ƒå‡å®šåªæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œå¦‚æœç½‘é¡µä¸­åŒ…å«å¤šä¸ªæ¡†æ¶ï¼Œé‚£å®é™…ä¸Šå°±å­˜åœ¨ä¸¤ä¸ªä»¥ä¸Šçš„æ‰§è¡Œç¯å¢ƒï¼Œä»è€Œå­˜åœ¨ä¸¤ä¸ªä»¥ä¸Šä¸åŒç‰ˆæœ¬çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœä½ ä»ä¸€ä¸ªæ¡†æ¶å‘å¦ä¸€ä¸ªæ¡†æ¶ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆä¼ å…¥çš„æ•°ç»„ä¸ç¬¬äºŒä¸ªæ¡†æ¶ä¸­åŸç”Ÿåˆ›å»ºçš„æ•°æ®åˆ†åˆ«å…·æœ‰å„è‡ªä¸åŒçš„æ„é€ å‡½æ•°ã€‚

```javascript
var iframe = document.createElement('iframe');
document.body.appendChild(iframe);
xArray = window.frames[0].Array;
var arr = new xArray(1,2,3); // [1,2,3]
arr instanceof Array; // false
```

é’ˆå¯¹æ•°ç»„è¿™ä¸ªé—®é¢˜ï¼Œ`ES5`æä¾›äº†`Array.isArray()`è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æœ¬èº«æ˜¯å¦ä¸º`Array`ç±»å‹ï¼Œè€Œä¸åŒºåˆ†åœ¨å“ªä¸ªç¯å¢ƒä¸­åˆ›å»ºã€‚`Array.isArray()`æœ¬è´¨ä¸Šå°±æ˜¯æ£€æŸ¥å¯¹è±¡çš„`[[Class]]`å€¼ï¼Œ`[[Class]]` æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œé‡Œé¢åŒ…å«äº†å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œå…¶æ ¼å¼ä¸º `[object Xxx]` ï¼Œ`Xxx` å°±æ˜¯å¯¹åº”çš„å…·ä½“ç±»å‹ ã€‚å¯¹äºæ•°ç»„è€Œè¨€ï¼Œ`[[Class]]` çš„å€¼å°±æ˜¯ `[object Array]` ã€‚

## ä¸‰ã€`constructor` æ„é€ å‡½æ•°

`constructor`æ˜¯åŸå‹`prototype`çš„ä¸€ä¸ªå±æ€§ï¼Œå½“å‡½æ•°è¢«å®šä¹‰æ—¶å€™ï¼Œ`js`å¼•æ“ä¼šä¸ºå‡½æ•°æ·»åŠ åŸå‹`prototype`ï¼Œå¹¶ä¸”è¿™ä¸ª`prototype`ä¸­`constructor`å±æ€§æŒ‡å‘å‡½æ•°å¼•ç”¨ï¼Œ å› æ­¤é‡å†™`prototype`ä¼šä¸¢å¤±åŸæ¥çš„`constructor`ã€‚

ä¸è¿‡è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºé™·ï¼š

- ä¸€æ˜¯`null` å’Œ `undefined` æ˜¯æ— æ•ˆçš„å¯¹è±¡ï¼Œä¹Ÿå°±ä¸å­˜åœ¨å¯¹åº”çš„`constructor`ï¼Œè¿™ä¸¤ç§ç±»å‹çš„æ•°æ®éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼åˆ¤æ–­ã€‚
- äºŒæ˜¯å¦‚æœè‡ªå®šä¹‰å¯¹è±¡ï¼Œå¼€å‘è€…é‡å†™`prototype`ä¹‹åï¼ŒåŸæœ‰çš„`constructor`ä¼šä¸¢å¤±ï¼Œå› æ­¤ï¼Œä¸ºäº†è§„èŒƒå¼€å‘ï¼Œåœ¨é‡å†™å¯¹è±¡åŸå‹æ—¶ä¸€èˆ¬éƒ½éœ€è¦é‡æ–°ç»™ `constructor` èµ‹å€¼ï¼Œä»¥ä¿è¯å¯¹è±¡å®ä¾‹çš„ç±»å‹ä¸è¢«ç¯¡æ”¹ã€‚

```javascript
(a = 1).constructor === Number;			// true
(a = '1').constructor === String;		 // true
(a = true).constructor === Boolean;	  // true
(a = {}).constructor === Object;		 // true
(a = []).constructor === Array;			// true
(a = function() {}).constructor === Function; // true
document.constructor === HTMLDocument; // true
window.constructor === window;			// true
```

## å››ã€`toString`å®Œç¾çš„æ–¹æ³•

`toString()` æ˜¯ `Object` çš„åŸå‹æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œé»˜è®¤è¿”å›å½“å‰å¯¹è±¡çš„ `[[Class]]` ã€‚è¿™æ˜¯ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œå…¶æ ¼å¼ä¸º` [object Xxx]` ï¼Œå…¶ä¸­ `Xxx` å°±æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚

å¯¹äº `Object` å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨ `toString()` å°±èƒ½è¿”å›` [object Object]` ã€‚è€Œå¯¹äºå…¶ä»–å¯¹è±¡ï¼Œåˆ™éœ€è¦é€šè¿‡ `call / apply` æ¥è°ƒç”¨æ‰èƒ½è¿”å›æ­£ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚

```javascript
Object.prototype.toString.call('');					// [object String]
Object.prototype.toString.call(1);					// [object Number]
Object.prototype.toString.call(true);				 // [object Boolean]
Object.prototype.toString.call(Symbol());		   // [object Symbol]
Object.prototype.toString.call(undefined);		 // [object Undefined]
Object.prototype.toString.call(null);				 // [object Null]
Object.prototype.toString.call(new Function());  // [object Function]
Object.prototype.toString.call(new Date());      // [object Date]
Object.prototype.toString.call([]);					// [object Array]
Object.prototype.toString.call(new RegExp());    // [object RegExp]
Object.prototype.toString.call(new Error());     // [object Error]
Object.prototype.toString.call(document);        // [object HTMLDocument]
Object.prototype.toString.call(window);          //[object global] window æ˜¯å…¨å±€å¯¹è±¡ global çš„å¼•ç”¨
```

## äº”ã€å„ç§æ–¹å¼ä¼˜ç¼ºç‚¹æ±‡æ€»


| ä¼˜ç¼ºç‚¹ | typeof | instanceof | constructor  | Object.prototype.toString.call   |
| :---: | :------| ---------- | ------------ | -------------------------------- |
|  ä¼˜ç‚¹  | ä½¿ç”¨ç®€å•  | èƒ½æ£€æµ‹å‡ºå¼•ç”¨ç±»å‹   | åŸºæœ¬èƒ½æ£€æµ‹æ‰€æœ‰çš„ç±»å‹ï¼ˆé™¤äº†nullå’Œundefinedï¼‰ | æ£€æµ‹å‡ºæ‰€æœ‰çš„ç±»å‹                 |
|  ç¼ºç‚¹  | åªèƒ½æ£€æµ‹å‡ºåŸºæœ¬ç±»å‹ï¼ˆå‡ºnullï¼‰ | ä¸èƒ½æ£€æµ‹å‡ºåŸºæœ¬ç±»å‹ï¼Œä¸”ä¸èƒ½è·¨iframe | constructoræ˜“è¢«ä¿®æ”¹ï¼Œä¹Ÿä¸èƒ½è·¨iframe         | IE6ä¸‹ï¼Œundefinedå’Œnullå‡ä¸ºObject |
