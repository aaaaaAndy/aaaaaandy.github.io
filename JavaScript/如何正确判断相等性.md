ğŸ·: #ç›¸ç­‰ 

ES2015 ä¸­æœ‰å››ç§ç›¸ç­‰ç®—æ³•ï¼š

- ***æŠ½è±¡ï¼ˆéä¸¥æ ¼ï¼‰ç›¸ç­‰æ¯”è¾ƒ*** (`==`)
- ***ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ*** (`===`): ç”¨äºÂ `Array.prototype.indexOf`,Â `Array.prototype.lastIndexOf`, å’ŒÂ `case`matching
- ***åŒå€¼é›¶***ï¼šç”¨äºÂ `%TypedArray%`Â å’ŒÂ `ArrayBuffer`Â æ„é€ å‡½æ•°ã€ä»¥åŠ`Map`å’Œ`Set`æ“ä½œï¼Œå¹¶å°†ç”¨äº ES2016/ES7 ä¸­çš„`String.prototype.includes`
- ***åŒå€¼***ï¼šç”¨äºæ‰€æœ‰å…¶ä»–åœ°æ–¹

JavaScript æä¾›ä¸‰ç§ä¸åŒçš„å€¼æ¯”è¾ƒæ“ä½œï¼š

- ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ (ä¹Ÿè¢«ç§°ä½œ"strict equality", "identity", "triple equals")ï¼Œä½¿ç”¨Â [===Â (en-US)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators#identity)Â ,
- æŠ½è±¡ç›¸ç­‰æ¯”è¾ƒ ("loose equality"ï¼Œ"double equals") ï¼Œä½¿ç”¨Â [==Â (en-US)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators#equality)
- ä»¥åŠÂ `[Object.is](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is)`Â ï¼ˆECMAScript 2015/ ES6 æ–°ç‰¹æ€§ï¼‰

## ä¸€ã€éä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ

éä¸¥æ ¼ç›¸ç­‰ä½¿ç”¨ä¸¤ä¸ªç­‰å·ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„åŒç­‰ï¼Œéä¸¥æ ¼ç›¸ç­‰è¡¨ç¤º**è¯­ä¹‰ç›¸ç­‰**ï¼Œä¸è¦æ±‚ç±»å‹ä¸€æ ·ï¼Œéä¸¥æ ¼ç›¸ç­‰åœ¨æ¯”è¾ƒå‰ä¼šå…ˆå°†æ¯”è¾ƒå‚æ•°ç±»å‹è½¬æ¢ä¸ºä¸€è‡´ï¼Œå†è¿›è¡Œæ¯”è¾ƒï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
1== 1;// true
1== '1';// true ç±»å‹ä¸åŒï¼Œä¸å½±å“æ¯”è¾ƒç»“æœ
```

éä¸¥æ ¼ç›¸ç­‰çš„çš„è½¬æ¢é€»è¾‘ï¼Œå¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹å‡ æ¡è§„åˆ™ï¼š

- å’Œ `Number` æ¯”è¾ƒæ—¶ï¼Œå¦ä¸€ä¸ªå€¼ä¼šè‡ªåŠ¨è½¬æ¢ä¸º `Number`
- å’Œ `Boolean` æ¯”è¾ƒæ—¶ï¼Œå¦ä¸€ä¸ªå€¼ä¼šè½¬æ¢ä¸º `Number`
- ç®€å•ç±»å‹ä¸å¼•ç”¨ç±»å‹æ¯”è¾ƒï¼Œå¯¹è±¡è½¬åŒ–æˆå…¶åŸå§‹ç±»å‹çš„å€¼ï¼Œå†æ¯”è¾ƒ
- ä¸¤ä¸ªéƒ½ä¸ºå¼•ç”¨ç±»å‹ï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡
- `undefined` åªå’Œ `null` ç›¸ç­‰
- å­˜åœ¨ `NaN` åˆ™è¿”å› `false`
- `+0` ç­‰äº `-0`

éä¸¥æ ¼ç›¸ç­‰æœ‰éå¸¸å¤æ‚çš„è½¬æ¢è§„åˆ™ï¼Œéå¸¸éš¾ä»¥è®°å¿†ï¼Œç¤¾åŒºä¸­[æœ‰äºº](https://dorey.github.io/JavaScript-Equality-Table/)å°†ä¸Šé¢çš„è§„åˆ™æ€»ç»“æˆäº†å›¾ç‰‡ï¼Œä¸€å›¾èƒœåƒè¨€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![591.png](https://raw.githubusercontent.com/aaaaaAndy/picture/main/images/20230406101359.png)

```jsx
var num = 0;
var obj = new String("0");
var str = "0";
var b = false;

console.log(num == num); // true
console.log(obj == obj); // true
console.log(str == str); // true

console.log(num == obj); // true
console.log(num == str); // true
console.log(obj == str); // true
console.log(null == undefined); // true

// both false, except in rare cases
console.log(obj == null);
console.log(obj == undefined);
```

éä¸¥æ ¼ç›¸ç­‰å¹¶éå¸¦æ¥äº†å¾ˆå¤šä¾¿åˆ©ï¼Œé€šè¿‡éšå¼çš„è‡ªåŠ¨è½¬æ¢ï¼Œç®€åŒ–äº†éƒ¨åˆ†åœºæ™¯çš„å·¥ä½œï¼Œæ¯”å¦‚ Number å’Œ String çš„è‡ªåŠ¨è½¬æ¢ï¼Œç®€åŒ–äº†å‰ç«¯ä»è¡¨å•ï¼Œurl å‚æ•°ä¸­è·å–å€¼çš„æ¯”è¾ƒé—®é¢˜ï¼Œä½†è‡ªåŠ¨è½¬æ¢å¸¦æ¥çš„é—®é¢˜æ¯”ä¾¿åˆ©è¿˜å¤šã€‚

## äºŒã€ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ

ä¸¥æ ¼ç›¸ç­‰æ˜¯å¦ä¸€ç§æ¯”è¾ƒç®—æ³•ï¼Œå…¶å’Œéä¸¥æ ¼æƒ³ç­‰çš„åŒºåˆ«æ˜¯ä¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢ï¼Œç±»å‹ä¸ä¸€è‡´æ—¶ç›´æ¥è¿”å› falseï¼Œä¸¥æ ¼ç›¸ç­‰å¯¹åº”`===`æ“ä½œç¬¦ï¼Œå› ä¸ºä½¿ç”¨ä¸‰ä¸ªç­‰å·ï¼Œä¹Ÿè¢«ç§°ä½œä¸‰ç­‰æˆ–è€…å…¨ç­‰ï¼Œä¸¥æ ¼ç›¸ç­‰ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
let result1 = ("55" === 55); // falseï¼Œä¸ç›¸ç­‰ï¼Œå› ä¸ºæ•°æ®ç±»å‹ä¸åŒ
let result2 = (55 === 55); // trueï¼Œç›¸ç­‰ï¼Œå› ä¸ºæ•°æ®ç±»å‹ç›¸åŒå€¼ä¹Ÿç›¸åŒ
```

`undefined` å’Œ `null` ä¸è‡ªèº«ä¸¥æ ¼ç›¸ç­‰

```jsx
let result1 = (null === null)  // true
let result2 = (undefined === undefined)  // true
let result3 = (null === undefined) // false ç±»å‹ä¸åŒ
```

ä¸åŒç±»å‹å€¼åˆ¤æ–­è§„åˆ™å¦‚ä¸‹ï¼Œå’Œå‰é¢çš„éä¸¥æ ¼ç›¸ç­‰å¯¹æ¯”ï¼Œä¸¥æ ¼ç›¸ç­‰æ›´ç¬¦åˆç›´è§‰ã€‚

![592.png](https://raw.githubusercontent.com/aaaaaAndy/picture/main/images/20230406101446.png)

ä¸¥æ ¼ç›¸ç­‰è§£å†³äº†éä¸¥æ ¼ç›¸ç­‰ä¸­éšå¼è½¬æ¢å¸¦æ¥çš„é—®é¢˜ï¼Œä½†ä¹Ÿä¸¢å¤±äº†éšå¼è½¬æ¢å¸¦æ¥çš„ä¾¿åˆ©ï¼Œå¯¹äºç±»å‹å¯èƒ½ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä»è¡¨å•ä¸­è·å–çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¿é™©çš„åšæ³•æ˜¯ï¼Œåœ¨æ¯”è¾ƒå‰æ‰‹åŠ¨ç±»å‹è½¬æ¢ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
1 === Number('1'); // true æ‰‹åŠ¨ç±»å‹è½¬æ¢ï¼Œç±»å‹é˜²å¾¡
```

ä¸¥æ ¼ç›¸ç­‰å‡ ä¹æ€»æ˜¯æ­£ç¡®çš„ï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µï¼Œæ¯”å¦‚ NaN å’Œæ­£è´Ÿ 0 çš„é—®é¢˜ã€‚

åœ¨ä¸¥æ ¼ç›¸ç­‰ä¸­ï¼ŒNaN æ˜¯ä¸ç­‰äºè‡ªå·±çš„ï¼ŒNaN æ˜¯(x !== x) æˆç«‹çš„å”¯ä¸€æƒ…å†µï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹å…¶å®æ˜¯å¸Œæœ›èƒ½å¤Ÿåˆ¤æ–­ NaN çš„ï¼Œå¯ä»¥ä½¿ç”¨ isNaN è¿›è¡Œåˆ¤æ–­ï¼ŒECMAScript 2015 å¼•å…¥äº†æ–°çš„ Number.isNaNï¼Œå’Œ isNaN çš„åŒºåˆ«æ˜¯ä¸ä¼šå¯¹ä¼ å…¥çš„å‚æ•°åšç±»å‹è½¬æ¢ï¼Œå»ºè®®ä½¿ç”¨è¯­ä¹‰æ›´æ¸…æ™°çš„ Number.isNaNï¼Œä½†æ˜¯è¦æ³¨æ„å…¼å®¹æ€§é—®é¢˜ï¼Œåˆ¤æ–­ NaN ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
NaN === NaN; // false

isNaN(NaN); // true
Number.isNaN(NaN); // true

isNaN('aaa'); // true è‡ªåŠ¨è½¬æ¢ç±»å‹ 'aaa'è½¬æ¢ä¸ºNumberä¸ºNaN
Number.isNaN('aaa'); // false ä¸è¿›è¡Œè½¬æ¢ï¼Œç±»å‹ä¸ä¸ºNumberï¼Œç›´æ¥è¿”å›false
```

ä¸¥æ ¼ç›¸ç­‰å¦ä¸€ä¸ªä¾‹å¤–æƒ…å†µæ˜¯ï¼Œæ— æ³•åŒºåˆ†+0 å’Œ-0ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼Œåœ¨ä¸€äº›æ•°å­¦è®¡ç®—åœºæ™¯ä¸­æ˜¯è¦åŒºåˆ†è¯­ä¹‰çš„ã€‚

```jsx
**+**0 **===** **-**0; *// true*
```

JavaScript ä¸­å¾ˆå¤šç³»ç»Ÿå‡½æ•°éƒ½ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰ï¼Œæ¯”å¦‚æ•°ç»„çš„ indexOfï¼ŒlastIndexOf å’Œ switch-case ç­‰ï¼Œéœ€è¦æ³¨æ„ï¼Œè¿™äº›å¯¹äº NaN æ— æ³•è¿”å›æ­£ç¡®ç»“æœï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
[NaN].indexOf(NaN); // -1 æ•°ç»„ä¸­å…¶å®å­˜åœ¨NaN
[NaN].lastIndexOf(NaN); // -1
```

## ä¸‰ã€åŒå€¼é›¶

åŒå€¼é›¶æ˜¯å¦ä¸€ç§ç›¸ç­‰ç®—æ³•ï¼Œåå­—æ¥æºäºè§„èŒƒçš„ç›´è¯‘ï¼Œè§„èŒƒä¸­å«åš SameValueZeroï¼ŒåŒå€¼é›¶å’Œä¸¥æ ¼ç›¸ç­‰åŠŸèƒ½ä¸€æ ·ï¼Œé™¤äº†å¤„ç† NaN çš„æ–¹å¼ï¼ŒåŒå€¼é›¶è®¤ä¸º NaN å’Œ NaN ç›¸ç­‰ï¼Œè¿™åœ¨åˆ¤æ–­ NaN æ˜¯å¦åœ¨é›†åˆä¸­çš„è¯­ä¹‰ä¸‹æ˜¯éå¸¸åˆç†çš„ã€‚

ECMAScript 2016 å¼•å…¥çš„ includes ä½¿ç”¨æ­¤ç®—æ³•ï¼Œæ­¤å¤– Map çš„é”®å»é‡å’Œ Set çš„å€¼å»é‡ï¼Œä½¿ç”¨æ­¤ç®—æ³•ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
[NaN].incdudes(NaN); // true æ³¨æ„å’ŒindexOfçš„åŒºåˆ«ï¼Œincdudesçš„è¯­ä¹‰æ›´åˆç†

new Set([NaN, NaN]); // [NaN] setä¸­åªä¼šæœ‰ä¸ªä¸€ä¸ªNaNï¼Œå¦‚æœ NaN !== NaNçš„è¯ï¼Œåº”è¯¥æ˜¯[NaN, NaN]

new Map([
  [NaN, 1],
  [NaN, 2],
]); // {NaN => 2} å¦‚æœ NaN !== NaNçš„è¯ï¼Œåº”è¯¥æ˜¯ {NaN => 1, NaN => 2}
```

## å››ã€åŒå€¼

åŒå€¼æ˜¯æœ€åä¸€ç§ç›¸ç­‰ç®—æ³•ï¼Œå…¶å’ŒåŒå€¼é›¶ç±»ä¼¼ï¼Œä½†è®¤ä¸º +0 ä¸ç­‰äº -0ï¼ŒECMAScript 2015 å¸¦æ¥çš„ [Object.is](http://object.is/) ä½¿ç”¨åŒå€¼ç®—æ³•ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
Object.is(NaN, NaN); // true
Object.is(+0, -0); // false ğŸ“¢ æ³¨æ„è¿™é‡Œ
```

å¯¹äºæ•°ç»„åˆ¤æ–­æ˜¯å¦å­˜åœ¨çš„åœºæ™¯ï¼Œå¦‚æœæƒ³åŒºåˆ†+0 å’Œ-0ï¼Œå¯ä»¥ä½¿ç”¨ ECMAScript 2015 å¼•å…¥çš„ find æ–¹æ³•ï¼Œè‡ªè¡Œæ§åˆ¶åˆ¤æ–­é€»è¾‘ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
[0].includes(-0);// ä¸èƒ½åŒºåˆ†-0
[0].find((val)=> Object.is(val,-0));// èƒ½åŒºåˆ†+0å’Œ-0
```

## äº”ã€åŒºåˆ«

ä¸‹é¢å¯¹æ¯”ä¸‹å››ç§ç®—æ³•çš„åŒºåˆ«ï¼ŒåŒºåˆ«å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

|  | éšå¼è½¬æ¢ | NaN å’Œ NaN | +0 å’Œ -0 |
| --- | --- | --- | --- |
| éä¸¥æ ¼ç›¸ç­‰(==) | æ˜¯ | false | true |
| ä¸¥æ ¼ç›¸ç­‰(===) | å¦ | false | true |
| åŒå€¼é›¶(includes ç­‰) | å¦ | true | true |
| åŒå€¼(Object.is) | å¦ | true | false |

## å‚è€ƒæ–‡æ¡£

[JavaScript ä¸­çš„ç›¸ç­‰æ€§åˆ¤æ–­ - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)

[å¦‚ä½•åœ¨JavaScriptä¸­åˆ¤æ–­ä¸¤ä¸ªå€¼ç›¸ç­‰](https://yanhaijing.com/javascript/2022/07/10/js-equal/)