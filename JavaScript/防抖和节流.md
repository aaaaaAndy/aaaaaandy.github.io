ðŸ“†: 2019-03-20 15:49:46
ðŸ·: #é˜²æŠ– #èŠ‚æµ

æ­¤ä¸¤ç§å‡½æ•°åœ¨å¹³å¸¸çš„å¼€å‘ä¸­ä¸ä¸€å®šä¼šé‡åˆ°ï¼Œä½†ç¡®å®žé¢è¯•æ—¶ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œæ‰€ä»¥ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆè¿˜æ˜¯éœ€è¦æŽŒæ¡çš„ã€‚

## ä¸€ã€å‡½æ•°é˜²æŠ–

åœ¨ç”¨æˆ·æ³¨å†Œæ—¶éªŒè¯ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨ï¼Œå¾ˆå¤šç½‘ç«™ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œä¸å†ç­‰å¾…ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®æ‰åŽ»æ ¡éªŒè¾“å…¥å†…å®¹ï¼Œè€Œæ˜¯è¾“å…¥æ¡†æœ‰è¾“å…¥å†…å®¹æ—¶å°±æ ¡éªŒã€‚ä½†æ˜¯è¿™æ ·å®žçŽ°ä¼šå¢žåŠ æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨çš„åŽ‹åŠ›ï¼Œæ‰€ä»¥æ­¤æ—¶å‡½æ•°é˜²æŠ–å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å‡½æ•°é˜²æŠ–ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç­‰ä¸€ç³»åˆ—è¾“å…¥æ“ä½œéƒ½å®Œæˆä¹‹åŽï¼Œä¸€æ®µæ—¶é—´å†…æ²¡æœ‰è¾“å…¥åŠ¨ä½œï¼Œå†åŽ»è¯·æ±‚æœåŠ¡å™¨è¿›è¡Œæ ¡éªŒã€‚å…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š

```javascript
var timer = null;  

// æ­¤å¤„ä¸€å®šè¦æ˜¯å…¨å±€å˜é‡ï¼Œè‡³å°‘ä¸èƒ½åœ¨æ¯æ¬¡è°ƒç”¨debounceçš„æ—¶å€™é‡æ–°å£°æ˜Ž
function debounce(fn, delay) {
	var context = this;
	var args = arguments;

	return function() {
		clearTimeout(timer);

		timer = setTimeout(function() {
			fn.apply(context, args);
		}, delay)
	}
}
```

## äºŒã€å‡½æ•°èŠ‚æµ

ä»¥åˆ¤æ–­é¡µé¢æ»šåŠ¨æ˜¯å¦åˆ°åº•ä¸ºä¾‹ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯ç›‘å¬windowçš„scrolläº‹ä»¶ã€‚ä½†æ˜¯é¼ æ ‡æ»šåŠ¨æ˜¯è¿žç»­çš„ï¼Œä¼šè§¦å‘å¤šæ¬¡äº‹ä»¶ï¼Œæ¶ˆè€—æµè§ˆå™¨èµ„æºã€‚æ­¤æ—¶å‡½æ•°èŠ‚æµå°±æœ‰äº†ç”¨æ­¦ä¹‹åœ°ã€‚å‡½æ•°èŠ‚æµï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨å°†è¿žç»­æ‰§è¡Œçš„äº‹ä»¶æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡ã€‚

æ–¹æ¡ˆ 1
```javascript
function throttle(fn, delay) {
	let canRun = true;
	let context = this;
	let args = arguments;
	
	return function () {
		if (!canRun) {
			return;
		}

		setTimeout(function () {
			fn.apply(context, args)
			canRun = true;
		}, delay)ï¼›
	}
}
```

æ–¹æ¡ˆ 2
```javascript
function throttle(fn, delay) {
	var context = this;
	var args = arguments;
	var timer = null;
	
	return function () {
		if (!timer) {
			timer = setTimeout(function () {
				fn.apply(context, args);
				timer = null;
			}, delay);
		}
	}
}
```

æ–¹æ¡ˆ 3
```javascript
function throttle(fn, delay) {
	var prev = null;
	var timer = null;

	return function () {
		var now = new Date();

		if (!prev) {
			prev = now;
		}

		if (now - prev > delay) {
			clearTimeout(timer);
			fn();
			prev = now;
		} else {
			clearTimeout(timer);
			timer = setTimeout(function () {
				fn();
			}, delay);
		}
	}
}
```

<!-- more -->
