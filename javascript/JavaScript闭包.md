ğŸ“†: 2020-05-20 17:29:09
ğŸ·: #é—­åŒ… 

## ä¸€ã€ä½œç”¨åŸŸ

ä½œç”¨åŸŸå†³å®šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸåŠå…¶å¯è§æ€§ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚å€¼å¾—ä¸€æçš„æ˜¯åœ¨`ES6`ä¹‹å‰ï¼Œä¹‹åå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œä½†æ˜¯åœ¨`ES6`ä¹‹åï¼Œå‡ºç°çš„`let`å’Œ`const`å¯ä»¥å®ç°å—çº§ä½œç”¨åŸŸã€‚

## äºŒã€ä»€ä¹ˆæ˜¯é—­åŒ…

é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯***åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°***ã€‚

ç”±äºé—­åŒ…ä¼šæºå¸¦åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šçš„å†…å­˜ï¼Œæ‰€ä»¥è¿‡åº¦ä½¿ç”¨é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šã€‚

## ä¸‰ã€é—­åŒ…å‡ ç§æƒ…å†µ

### 1. Timer

å˜é‡`x`å°†ä¸€ç›´å­˜æ´»ç€ï¼Œç›´åˆ°å®šæ—¶å™¨çš„å›è°ƒæ‰§è¡Œæˆ–è€…è¢«æ¸…é™¤ã€‚

```javascript
(function autorun(){
  let x = 1;
  setTimeout(function log() {
    console.log(x);
  }, 1000);
})();
```

### 2. Event

å½“å˜é‡ `x` åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¢«ä½¿ç”¨æ—¶ï¼Œå®ƒå°†ä¸€ç›´å­˜æ´»ç›´åˆ°è¯¥äº‹ä»¶å¤„ç†å‡½æ•°è¢«ç§»é™¤ã€‚

```javascript
(function autorun(){
  let x = 1;
  $('#btn').on('click', function log(){
    console.log(x);
  })
})();
```

### 3. Ajax

å˜é‡ `x` å°†ä¸€ç›´å­˜æ´»åˆ°æ¥æ”¶åˆ°åç«¯è¿”å›ç»“æœï¼Œå›è°ƒå‡½æ•°è¢«æ‰§è¡Œã€‚

```javascript
(function autorun() {
  let x = 1;
  fetch('/...').then(function log(){
    console.log(x);
  })
})();
```

### 4. é—­åŒ…ä¸å¾ªç¯

é—­åŒ…åªå­˜å‚¨å¤–éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œè€Œä¸ä¼šæ‹·è´è¿™äº›å¤–éƒ¨å˜é‡çš„å€¼ã€‚

```javascript
// è¿”å›ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œä¸”æ¯ä¸ªå‡½æ•°çš„è¿”å›å€¼éƒ½æ˜¯10ï¼Œå› ä¸ºå®ƒå€¼å­˜å‚¨äº†içš„å¼•ç”¨ã€‚
function createFunctions() {
  var result = new Array();
  
  for (var i = 0; i > 10; i++) {
      result[i] = function() {
        return i;
      }
  } 
  
  return result;
}
```

é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨é—­åŒ…æ—¶è¦æ³¨æ„å–å€¼çš„æƒ…å†µã€‚

```javascript
// è¿”å›ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œæ¯ä¸ªå‡½æ•°éƒ½èƒ½è¿”å›æ­£ç¡®çš„iå€¼
function createFunctions() {
  var result = new Array();
  
  for (var i = 0; i > 10; i++) {
      result[i] = function(num) {   // ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°ç»™æ¯ä¸ªresultå…ƒç´ åˆ›é€ ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ
        return function() {
          return num;
        }
      }(i);
  } 
  
  return result;
}

var timer = setInterval(function(i) {
  console.log(i);
}, 2000, 111);

clearTimeout(timer);
```

<!-- more -->
