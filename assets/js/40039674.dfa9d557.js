"use strict";(self.webpackChunkaaaaaandy_github_io=self.webpackChunkaaaaaandy_github_io||[]).push([[12998],{3905:(e,n,t)=>{t.d(n,{Zo:()=>o,kt:()=>d});var a=t(67294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},p=Object.keys(e);for(a=0;a<p.length;a++)t=p[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)t=p[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var c=a.createContext({}),u=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},o=function(e){var n=u(e.components);return a.createElement(c.Provider,{value:n},e.children)},m="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},k=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,p=e.originalType,c=e.parentName,o=r(e,["components","mdxType","originalType","parentName"]),m=u(t),k=l,d=m["".concat(c,".").concat(k)]||m[k]||s[k]||p;return t?a.createElement(d,i(i({ref:n},o),{},{components:t})):a.createElement(d,i({ref:n},o))}));function d(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var p=t.length,i=new Array(p);i[0]=k;var r={};for(var c in n)hasOwnProperty.call(n,c)&&(r[c]=n[c]);r.originalType=e,r[m]="string"==typeof e?e:l,i[1]=r;for(var u=2;u<p;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},65151:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>s,frontMatter:()=>p,metadata:()=>r,toc:()=>u});var a=t(87462),l=(t(67294),t(3905));const p={},i=void 0,r={unversionedId:"webpack/webpack\u4e2d\u5e38\u89c1\u7684Plugin",id:"webpack/webpack\u4e2d\u5e38\u89c1\u7684Plugin",title:"webpack\u4e2d\u5e38\u89c1\u7684Plugin",description:"\u4e00\u3001\u662f\u4ec0\u4e48",source:"@site/docs/webpack/webpack\u4e2d\u5e38\u89c1\u7684Plugin.md",sourceDirName:"webpack",slug:"/webpack/webpack\u4e2d\u5e38\u89c1\u7684Plugin",permalink:"/docs/webpack/webpack\u4e2d\u5e38\u89c1\u7684Plugin",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"webpackSidebar",previous:{title:"webpack\u4e2d\u5e38\u89c1\u7684Loader",permalink:"/docs/webpack/webpack\u4e2d\u5e38\u89c1\u7684Loader"},next:{title:"webpack\u7684\u6784\u5efa\u6d41\u7a0b",permalink:"/docs/webpack/webpack\u7684\u6784\u5efa\u6d41\u7a0b"}},c={},u=[{value:"\u4e00\u3001\u662f\u4ec0\u4e48",id:"\u4e00\u662f\u4ec0\u4e48",level:2},{value:"\u914d\u7f6e\u65b9\u5f0f",id:"\u914d\u7f6e\u65b9\u5f0f",level:3},{value:"\u4e8c\u3001\u7279\u6027",id:"\u4e8c\u7279\u6027",level:2},{value:"\u4e09\u3001\u5e38\u89c1\u7684Plugin",id:"\u4e09\u5e38\u89c1\u7684plugin",level:2},{value:"HtmlWebpackPlugin",id:"htmlwebpackplugin",level:3},{value:"clean-webpack-plugin",id:"clean-webpack-plugin",level:3},{value:"mini-css-extract-plugin",id:"mini-css-extract-plugin",level:3},{value:"DefinePlugin",id:"defineplugin",level:3},{value:"copy-webpack-plugin",id:"copy-webpack-plugin",level:3},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:2}],o={toc:u},m="wrapper";function s(e){let{components:n,...t}=e;return(0,l.kt)(m,(0,a.Z)({},o,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u4e00\u662f\u4ec0\u4e48"},"\u4e00\u3001\u662f\u4ec0\u4e48"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Plugin"),"\uff08Plug-in\uff09\u662f\u4e00\u79cd\u8ba1\u7b97\u673a\u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u548c\u4e3b\u5e94\u7528\u7a0b\u5e8f\u4e92\u76f8\u4ea4\u4e92\uff0c\u4ee5\u63d0\u4f9b\u7279\u5b9a\u7684\u529f\u80fd"),(0,l.kt)("p",null,"\u662f\u4e00\u79cd\u9075\u5faa\u4e00\u5b9a\u89c4\u8303\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\u7f16\u5199\u51fa\u6765\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u8fd0\u884c\u5728\u7a0b\u5e8f\u89c4\u5b9a\u7684\u7cfb\u7edf\u4e0b\uff0c\u56e0\u4e3a\u5176\u9700\u8981\u8c03\u7528\u539f\u7eaf\u51c0\u7cfb\u7edf\u63d0\u4f9b\u7684\u51fd\u6570\u5e93\u6216\u8005\u6570\u636e"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"webpack"),"\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"plugin"),"\u4e5f\u662f\u5982\u6b64\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"plugin"),"\u8d4b\u4e88\u5176\u5404\u79cd\u7075\u6d3b\u7684\u529f\u80fd\uff0c\u4f8b\u5982\u6253\u5305\u4f18\u5316\u3001\u8d44\u6e90\u7ba1\u7406\u3001\u73af\u5883\u53d8\u91cf\u6ce8\u5165\u7b49\uff0c\u5b83\u4eec\u4f1a\u8fd0\u884c\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"webpack")," \u7684\u4e0d\u540c\u9636\u6bb5\uff08\u94a9\u5b50 / \u751f\u547d\u5468\u671f\uff09\uff0c\u8d2f\u7a7f\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"webpack"),"\u6574\u4e2a\u7f16\u8bd1\u5468\u671f"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://static.vue-js.com/9a04ec40-a7c2-11eb-ab90-d9ae814b240d.png",alt:null})),(0,l.kt)("p",null,"\u76ee\u7684\u5728\u4e8e\u89e3\u51b3",(0,l.kt)("inlineCode",{parentName:"p"},"loader")," \u65e0\u6cd5\u5b9e\u73b0\u7684\u5176\u4ed6\u4e8b"),(0,l.kt)("h3",{id:"\u914d\u7f6e\u65b9\u5f0f"},"\u914d\u7f6e\u65b9\u5f0f"),(0,l.kt)("p",null,"\u8fd9\u91cc\u8bb2\u8ff0\u6587\u4ef6\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u4e00\u822c\u60c5\u51b5\uff0c\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5bfc\u51fa\u5bf9\u8c61\u4e2d",(0,l.kt)("inlineCode",{parentName:"p"},"plugins"),"\u5c5e\u6027\u4f20\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"new"),"\u5b9e\u4f8b\u5bf9\u8c61\u3002\u5982\u4e0b\u6240\u793a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const HtmlWebpackPlugin = require('html-webpack-plugin'); // \u901a\u8fc7 npm \u5b89\u88c5\nconst webpack = require('webpack'); // \u8bbf\u95ee\u5185\u7f6e\u7684\u63d2\u4ef6\nmodule.exports = {\n  ...\n  plugins: [\n    new webpack.ProgressPlugin(),\n    new HtmlWebpackPlugin({ template: './src/index.html' }),\n  ],\n};\n")),(0,l.kt)("h2",{id:"\u4e8c\u7279\u6027"},"\u4e8c\u3001\u7279\u6027"),(0,l.kt)("p",null,"\u5176\u672c\u8d28\u662f\u4e00\u4e2a\u5177\u6709",(0,l.kt)("inlineCode",{parentName:"p"},"apply"),"\u65b9\u6cd5",(0,l.kt)("inlineCode",{parentName:"p"},"javascript"),"\u5bf9\u8c61"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"apply")," \u65b9\u6cd5\u4f1a\u88ab ",(0,l.kt)("inlineCode",{parentName:"p"},"webpack compiler "),"\u8c03\u7528\uff0c\u5e76\u4e14\u5728\u6574\u4e2a\u7f16\u8bd1\u751f\u547d\u5468\u671f\u90fd\u53ef\u4ee5\u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"compiler "),"\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const pluginName = 'ConsoleLogOnBuildWebpackPlugin';\n\nclass ConsoleLogOnBuildWebpackPlugin {\n  apply(compiler) {\n    compiler.hooks.run.tap(pluginName, (compilation) => {\n      console.log('webpack \u6784\u5efa\u8fc7\u7a0b\u5f00\u59cb\uff01');\n    });\n  }\n}\n\nmodule.exports = ConsoleLogOnBuildWebpackPlugin;\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"compiler hook")," \u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"tap "),"\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5e94\u662f\u9a7c\u5cf0\u5f0f\u547d\u540d\u7684\u63d2\u4ef6\u540d\u79f0"),(0,l.kt)("p",null,"\u5173\u4e8e\u6574\u4e2a\u7f16\u8bd1\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u6709\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"entry-option \uff1a\u521d\u59cb\u5316 option"),(0,l.kt)("li",{parentName:"ul"},"run"),(0,l.kt)("li",{parentName:"ul"},"compile\uff1a \u771f\u6b63\u5f00\u59cb\u7684\u7f16\u8bd1\uff0c\u5728\u521b\u5efa compilation \u5bf9\u8c61\u4e4b\u524d"),(0,l.kt)("li",{parentName:"ul"},"compilation \uff1a\u751f\u6210\u597d\u4e86 compilation \u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"make \u4ece entry \u5f00\u59cb\u9012\u5f52\u5206\u6790\u4f9d\u8d56\uff0c\u51c6\u5907\u5bf9\u6bcf\u4e2a\u6a21\u5757\u8fdb\u884c build"),(0,l.kt)("li",{parentName:"ul"},"after-compile\uff1a \u7f16\u8bd1 build \u8fc7\u7a0b\u7ed3\u675f"),(0,l.kt)("li",{parentName:"ul"},"emit \uff1a\u5728\u5c06\u5185\u5b58\u4e2d assets \u5185\u5bb9\u5199\u5230\u78c1\u76d8\u6587\u4ef6\u5939\u4e4b\u524d"),(0,l.kt)("li",{parentName:"ul"},"after-emit \uff1a\u5728\u5c06\u5185\u5b58\u4e2d assets \u5185\u5bb9\u5199\u5230\u78c1\u76d8\u6587\u4ef6\u5939\u4e4b\u540e"),(0,l.kt)("li",{parentName:"ul"},"done\uff1a \u5b8c\u6210\u6240\u6709\u7684\u7f16\u8bd1\u8fc7\u7a0b"),(0,l.kt)("li",{parentName:"ul"},"failed\uff1a \u7f16\u8bd1\u5931\u8d25\u7684\u65f6\u5019")),(0,l.kt)("h2",{id:"\u4e09\u5e38\u89c1\u7684plugin"},"\u4e09\u3001\u5e38\u89c1\u7684Plugin"),(0,l.kt)("p",null,"\u5e38\u89c1\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"plugin"),"\u6709\u5982\u56fe\u6240\u793a\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://static.vue-js.com/bd749400-a7c2-11eb-85f6-6fac77c0c9b3.png",alt:null})),(0,l.kt)("p",null,"\u4e0b\u9762\u4ecb\u7ecd\u51e0\u4e2a\u5e38\u7528\u7684\u63d2\u4ef6\u7528\u6cd5\uff1a"),(0,l.kt)("h3",{id:"htmlwebpackplugin"},"HtmlWebpackPlugin"),(0,l.kt)("p",null,"\u5728\u6253\u5305\u7ed3\u675f\u540e\uff0c\u2f83\u52a8\u751f\u6210\u2f00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"html")," \u2f42\u6587\u4ef6\uff0c\u5e76\u628a\u6253\u5305\u751f\u6210\u7684",(0,l.kt)("inlineCode",{parentName:"p"}," js")," \u6a21\u5757\u5f15\u2f0a\u5230\u8be5 ",(0,l.kt)("inlineCode",{parentName:"p"},"html")," \u4e2d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev html-webpack-plugin\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'// webpack.config.js\nconst HtmlWebpackPlugin = require("html-webpack-plugin");\nmodule.exports = {\n ...\n  plugins: [\n     new HtmlWebpackPlugin({\n       title: "My App",\n       filename: "app.html",\n       template: "./src/html/index.html"\n     }) \n  ]\n};\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!--./src/html/index.html--\x3e\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title><%=htmlWebpackPlugin.options.title%></title>\n</head>\n<body>\n    <h1>html-webpack-plugin</h1>\n</body>\n</html>\n')),(0,l.kt)("p",null,"\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"html")," \u6a21\u677f\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"<%=htmlWebpackPlugin.options.XXX%>")," \u7684\u65b9\u5f0f\u83b7\u53d6\u914d\u7f6e\u7684\u503c"),(0,l.kt)("p",null,"\u66f4\u591a\u7684\u914d\u7f6e\u53ef\u4ee5\u81ea\u5bfb\u67e5\u627e"),(0,l.kt)("h3",{id:"clean-webpack-plugin"},"clean-webpack-plugin"),(0,l.kt)("p",null,"\u5220\u9664\uff08\u6e05\u7406\uff09\u6784\u5efa\u76ee\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev clean-webpack-plugin\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const {CleanWebpackPlugin} = require('clean-webpack-plugin');\nmodule.exports = {\n ...\n  plugins: [\n    ...,\n    new CleanWebpackPlugin(),\n    ...\n  ]\n}\n")),(0,l.kt)("h3",{id:"mini-css-extract-plugin"},"mini-css-extract-plugin"),(0,l.kt)("p",null,"\u63d0\u53d6 ",(0,l.kt)("inlineCode",{parentName:"p"},"CSS")," \u5230\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e2d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev mini-css-extract-plugin\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const MiniCssExtractPlugin = require('mini-css-extract-plugin');\nmodule.exports = {\n ...,\n  module: {\n   rules: [\n    {\n     test: /\\.s[ac]ss$/,\n     use: [\n      {\n       loader: MiniCssExtractPlugin.loader\n     },\n          'css-loader',\n          'sass-loader'\n        ]\n   }\n   ]\n },\n  plugins: [\n    ...,\n    new MiniCssExtractPlugin({\n     filename: '[name].css'\n    }),\n    ...\n  ]\n}\n")),(0,l.kt)("h3",{id:"defineplugin"},"DefinePlugin"),(0,l.kt)("p",null,"\u5141\u8bb8\u5728\u7f16\u8bd1\u65f6\u521b\u5efa\u914d\u7f6e\u7684\u5168\u5c40\u5bf9\u8c61\uff0c\u662f\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"webpack"),"\u5185\u7f6e\u7684\u63d2\u4ef6\uff0c\u4e0d\u9700\u8981\u5b89\u88c5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const { DefinePlugun } = require('webpack')\n\nmodule.exports = {\n ...\n    plugins:[\n        new DefinePlugin({\n            BASE_URL:'\"./\"'\n        })\n    ]\n}\n")),(0,l.kt)("p",null,"\u8fd9\u65f6\u5019\u7f16\u8bd1",(0,l.kt)("inlineCode",{parentName:"p"},"template"),"\u6a21\u5757\u7684\u65f6\u5019\uff0c\u5c31\u80fd\u901a\u8fc7\u4e0b\u8ff0\u5f62\u5f0f\u83b7\u53d6\u5168\u5c40\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<link rel="icon" href="<%= BASE_URL%>favicon.ico>"\n')),(0,l.kt)("h3",{id:"copy-webpack-plugin"},"copy-webpack-plugin"),(0,l.kt)("p",null,"\u590d\u5236\u6587\u4ef6\u6216\u76ee\u5f55\u5230\u6267\u884c\u533a\u57df\uff0c\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"vue"),"\u7684\u6253\u5305\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u5c06\u4e00\u4e9b\u6587\u4ef6\u653e\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"public"),"\u7684\u76ee\u5f55\u4e0b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u76ee\u5f55\u4f1a\u88ab\u590d\u5236\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"dist"),"\u6587\u4ef6\u5939\u4e2d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cmd"},"npm install copy-webpack-plugin -D\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"new CopyWebpackPlugin({\n    parrerns:[\n        {\n            from:\"public\",\n            globOptions:{\n                ignore:[\n                    '**/index.html'\n                ]\n            }\n        }\n    ]\n})\n")),(0,l.kt)("p",null,"\u590d\u5236\u7684\u89c4\u5219\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"patterns"),"\u5c5e\u6027\u4e2d\u8bbe\u7f6e\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"from\uff1a\u8bbe\u7f6e\u4ece\u54ea\u4e00\u4e2a\u6e90\u4e2d\u5f00\u59cb\u590d\u5236")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"to\uff1a\u590d\u5236\u5230\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u7701\u7565\uff0c\u4f1a\u9ed8\u8ba4\u590d\u5236\u5230\u6253\u5305\u7684\u76ee\u5f55\u4e0b")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"globOptions\uff1a\u8bbe\u7f6e\u4e00\u4e9b\u989d\u5916\u7684\u9009\u9879\uff0c\u5176\u4e2d\u53ef\u4ee5\u7f16\u5199\u9700\u8981\u5ffd\u7565\u7684\u6587\u4ef6"))),(0,l.kt)("h2",{id:"\u53c2\u8003\u6587\u732e"},"\u53c2\u8003\u6587\u732e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://webpack.docschina.org/concepts/plugins/"},"https://webpack.docschina.org/concepts/plugins/")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://baike.baidu.com/item/Plugin"},"https://baike.baidu.com/item/Plugin")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://segmentfault.com/a/1190000018695134"},"https://segmentfault.com/a/1190000018695134")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://vue3js.cn/interview"},"https://vue3js.cn/interview"))))}s.isMDXComponent=!0}}]);